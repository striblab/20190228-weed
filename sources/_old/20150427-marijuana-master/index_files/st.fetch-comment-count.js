var commentCount={};commentCount.stories=[];commentCount.livefyreDivCountClass='.fyre-comment-count span';commentCount.commentCountTemplate=twig({id:'comment-count',async:true,href:twigJsDomain+'/twig/components/tease-section-comment-count.twig'});commentCount.renderHtml=function(result,selector){var html='';if(result.count>=50){html=twig({ref:'comment-count'}).render(result);if(html){jQuery(selector).html(html);jQuery(selector).addClass('related-icn-comments');jQuery(selector).show();return true;}}
commentCount.remove(selector);return false;};commentCount.remove=function(selector){jQuery(selector).remove();};commentCount.fetchAll=function(){};commentCount.addId=function(id,path,data){this.stories[id]={'path':path,'data':data};return true;};commentCount.count=function(){return this.stories.length;};commentCount.all=function(){return this.stories;};commentCount.articleCountLoaded=function(){return(!$('.comments-count').is(':empty'));};commentCount.checkLivefyreLoaded=function(ajaxCount,selector){var count=false;if($(commentCount.livefyreDivCountClass).length&&ajaxCount===false){count=$(commentCount.livefyreDivCountClass).html();}
if(ajaxCount!==false){count=ajaxCount;}
if(count!==false&&(typeof count==='string'||typeof count=='number')){var prefix='';if(selector!==false){prefix=selector+' ';}
commentCount.placeCount(count,prefix+'.comments-count');commentCount.placeCount(count,prefix+'.share__comments .share-count');}};commentCount.placeCount=function(count,selector){if(typeof count==='string'){count=count.replace('comments','').replace('comment','');}
$(selector).html(count);};commentCount.articleCount=function(){var ran;ran=0;var articleCommentCountCheck=setInterval(function(){commentCount.checkLivefyreLoaded(false,false);if(commentCount.articleCountLoaded()||ran>100){clearInterval(articleCommentCountCheck);}
ran++;},30);};commentCount.fetch=function(id,path,data,is_blog_front){var queryString={'path':path,'data':JSON.stringify(data)};var selector='.comment-count-'+ id;jQuery.ajax({type:'GET',url:'http://'+ document.domain+'/comment/count/'+ id+'?'+ jQuery.param(queryString),dataType:'json'}).done(function(result){if(is_blog_front===true){commentCount.checkLivefyreLoaded(result.count,selector);}
else{commentCount.renderHtml(result,selector);}}).fail(function(){commentCount.remove(selector);});};